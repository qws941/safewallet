(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{8486:function(e,s,a){Promise.resolve().then(a.bind(a,6720))},6720:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return f},runtime:function(){return v}});var t=a(7573),l=a(1695),n=a(1883),i=a(2384),c=a(7653),r=a(2389);let d=(0,r.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var u=a(269);let o=(0,r.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var m=a(3212),x=a(189);let h=[{value:m.RejectReason.DUPLICATE,label:"중복 제보"},{value:m.RejectReason.UNCLEAR_PHOTO,label:"사진 불명확"},{value:m.RejectReason.INSUFFICIENT,label:"정보 부족"},{value:m.RejectReason.FALSE,label:"허위 제보"},{value:m.RejectReason.IRRELEVANT,label:"관련 없음"},{value:m.RejectReason.OTHER,label:"기타"}];function j(e){let{postId:s,onComplete:a}=e,[l,n]=(0,c.useState)(!1),[r,j]=(0,c.useState)(!1),[v,N]=(0,c.useState)(null),[p,f]=(0,c.useState)(""),R=(0,x.cl)();return l?(0,t.jsxs)(i.Zb,{className:"p-4",children:[(0,t.jsx)("h3",{className:"mb-3 font-medium",children:"거절 사유 선택"}),(0,t.jsx)("div",{className:"mb-3 flex flex-wrap gap-2",children:h.map(e=>(0,t.jsx)(i.zx,{variant:v===e.value?"default":"outline",size:"sm",onClick:()=>N(e.value),children:e.label},e.value))}),(0,t.jsx)(i.II,{placeholder:"추가 설명 (선택)",value:p,onChange:e=>f(e.target.value),className:"mb-3"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.zx,{variant:"destructive",onClick:()=>{v&&R.mutate({postId:s,action:m.ReviewAction.REJECT,reason:v,note:p},{onSuccess:()=>{n(!1),N(null),f(""),null==a||a()}})},disabled:!v||R.isPending,children:"거절"}),(0,t.jsx)(i.zx,{variant:"outline",onClick:()=>n(!1),children:"취소"})]})]}):r?(0,t.jsxs)(i.Zb,{className:"p-4",children:[(0,t.jsx)("h3",{className:"mb-3 font-medium",children:"추가 정보 요청"}),(0,t.jsx)(i.II,{placeholder:"필요한 정보를 입력하세요",value:p,onChange:e=>f(e.target.value),className:"mb-3"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(i.zx,{onClick:()=>{p.trim()&&R.mutate({postId:s,action:m.ReviewAction.REQUEST_MORE,note:p},{onSuccess:()=>{j(!1),f(""),null==a||a()}})},disabled:!p.trim()||R.isPending,children:"요청 보내기"}),(0,t.jsx)(i.zx,{variant:"outline",onClick:()=>j(!1),children:"취소"})]})]}):(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.zx,{onClick:()=>{R.mutate({postId:s,action:m.ReviewAction.APPROVE},{onSuccess:a})},disabled:R.isPending,className:"gap-1",children:[(0,t.jsx)(d,{size:16}),"승인"]}),(0,t.jsxs)(i.zx,{variant:"destructive",onClick:()=>n(!0),disabled:R.isPending,className:"gap-1",children:[(0,t.jsx)(u.Z,{size:16}),"거절"]}),(0,t.jsxs)(i.zx,{variant:"outline",onClick:()=>j(!0),disabled:R.isPending,className:"gap-1",children:[(0,t.jsx)(o,{size:16}),"추가 정보 요청"]})]})}let v="edge",N={[m.ReviewStatus.RECEIVED]:"접수됨",[m.ReviewStatus.IN_REVIEW]:"검토 중",[m.ReviewStatus.NEED_INFO]:"추가정보 필요",[m.ReviewStatus.APPROVED]:"승인됨",[m.ReviewStatus.REJECTED]:"거절됨"},p={[m.Category.HAZARD]:"위험요소",[m.Category.UNSAFE_BEHAVIOR]:"불안전 행동",[m.Category.INCONVENIENCE]:"불편사항",[m.Category.SUGGESTION]:"개선 제안",[m.Category.BEST_PRACTICE]:"모범 사례"};function f(){let e=(0,l.useParams)(),s=(0,l.useRouter)(),a=null==e?void 0:e.id,{data:c,isLoading:r,refetch:d}=(0,x.S5)(a);if(r)return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(i.Od,{className:"h-8 w-48"}),(0,t.jsx)(i.Od,{className:"h-96"})]});if(!c)return(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{children:"제보를 찾을 수 없습니다"}),(0,t.jsx)(i.zx,{variant:"link",onClick:()=>s.back(),children:"돌아가기"})]});let u=c.status===m.ReviewStatus.RECEIVED||c.status===m.ReviewStatus.IN_REVIEW;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(i.zx,{variant:"ghost",size:"icon",onClick:()=>s.back(),children:(0,t.jsx)(n.Z,{size:20})}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"제보 상세"})]}),(0,t.jsxs)(i.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"mb-6 flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:c.title}),(0,t.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,t.jsx)(i.Ct,{variant:"outline",children:p[c.category]||c.category}),(0,t.jsx)(i.Ct,{children:N[c.status]||c.status})]})]}),(0,t.jsxs)("div",{className:"text-right text-sm text-muted-foreground",children:[(0,t.jsx)("p",{children:c.author.nameMasked}),(0,t.jsx)("p",{children:new Date(c.createdAt).toLocaleString("ko-KR")})]})]}),(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"mb-2 font-medium",children:"내용"}),(0,t.jsx)("p",{className:"whitespace-pre-wrap text-muted-foreground",children:c.description})]}),c.location&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"mb-2 font-medium",children:"위치"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:c.location})]}),c.photos&&c.photos.length>0&&(0,t.jsxs)("div",{className:"mb-6",children:[(0,t.jsx)("h3",{className:"mb-2 font-medium",children:"첨부 사진"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:c.photos.map((e,s)=>(0,t.jsx)("img",{src:e,alt:"첨부 사진 ".concat(s+1),className:"aspect-square rounded-lg object-cover"},s))})]}),u&&(0,t.jsxs)("div",{className:"border-t pt-6",children:[(0,t.jsx)("h3",{className:"mb-4 font-medium",children:"검토 액션"}),(0,t.jsx)(j,{postId:a,onComplete:()=>d()})]})]})]})}},1883:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(2389).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},269:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(2389).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},1695:function(e,s,a){"use strict";var t=a(1219);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})}},function(e){e.O(0,[113,953,551,155,293,456,744],function(){return e(e.s=8486)}),_N_E=e.O()}]);