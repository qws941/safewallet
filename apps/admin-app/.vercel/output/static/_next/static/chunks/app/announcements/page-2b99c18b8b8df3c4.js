(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{2042:function(e,s,a){Promise.resolve().then(a.bind(a,7322))},7322:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var t=a(7573),n=a(7653),i=a(2389);let l=(0,i.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),c=(0,i.Z)("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),d=(0,i.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),r=(0,i.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var x=a(2384),h=a(189);function o(){let{data:e=[],isLoading:s}=(0,h.Y7)(),a=(0,h.qQ)(),i=(0,h.PQ)(),o=(0,h.Zf)(),[u,m]=(0,n.useState)(!1),[p,j]=(0,n.useState)(null),[f,g]=(0,n.useState)(""),[N,k]=(0,n.useState)(""),[v,y]=(0,n.useState)(!1),b=()=>{m(!1),j(null),g(""),k(""),y(!1)},P=e=>{j(e.id),g(e.title),k(e.content),y(e.isPinned),m(!0)},z=e=>{confirm("정말 삭제하시겠습니까?")&&o.mutate(e)},w=[...e].sort((e,s)=>e.isPinned&&!s.isPinned?-1:!e.isPinned&&s.isPinned?1:new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime());return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"공지사항"}),!u&&(0,t.jsxs)(x.zx,{onClick:()=>m(!0),className:"gap-1",children:[(0,t.jsx)(l,{size:16}),"새 공지"]})]}),u&&(0,t.jsxs)(x.Zb,{className:"p-6",children:[(0,t.jsx)("h2",{className:"mb-4 text-lg font-semibold",children:p?"공지 수정":"새 공지 작성"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(x.II,{placeholder:"제목",value:f,onChange:e=>g(e.target.value)}),(0,t.jsx)("textarea",{placeholder:"내용",value:N,onChange:e=>k(e.target.value),className:"min-h-[120px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm"}),(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:v,onChange:e=>y(e.target.checked),className:"rounded"}),(0,t.jsx)("span",{className:"text-sm",children:"상단 고정"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(x.zx,{onClick:()=>{f&&N&&(p?i.mutate({id:p,title:f,content:N,isPinned:v},{onSuccess:b}):a.mutate({title:f,content:N,isPinned:v},{onSuccess:b}))},disabled:!f||!N||a.isPending||i.isPending,children:p?"수정":"등록"}),(0,t.jsx)(x.zx,{variant:"outline",onClick:b,children:"취소"})]})]})]}),s?(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"로딩 중..."}):0===w.length?(0,t.jsx)("p",{className:"text-center text-muted-foreground",children:"공지사항이 없습니다"}):(0,t.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,t.jsx)(x.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[e.isPinned&&(0,t.jsx)(c,{size:16,className:"text-primary"}),(0,t.jsx)("h3",{className:"font-semibold",children:e.title}),e.isPinned&&(0,t.jsx)(x.Ct,{variant:"secondary",children:"고정"})]}),(0,t.jsx)("p",{className:"whitespace-pre-wrap text-muted-foreground",children:e.content}),(0,t.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:new Date(e.createdAt).toLocaleString("ko-KR")})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(x.zx,{variant:"ghost",size:"icon",onClick:()=>P(e),children:(0,t.jsx)(d,{size:16})}),(0,t.jsx)(x.zx,{variant:"ghost",size:"icon",onClick:()=>z(e.id),disabled:o.isPending,children:(0,t.jsx)(r,{size:16})})]})]})},e.id))})]})}}},function(e){e.O(0,[113,953,551,155,293,456,744],function(){return e(e.s=2042)}),_N_E=e.O()}]);