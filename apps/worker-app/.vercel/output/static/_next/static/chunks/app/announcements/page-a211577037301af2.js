(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{527:function(e,t,r){Promise.resolve().then(r.bind(r,6027))},6027:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7573),s=r(8368),a=r(189),o=r(5140),i=r(3857),u=r(2384);function l(){let{currentSiteId:e}=(0,s.a)(),{data:t,isLoading:r}=(0,a._g)(e||""),l=(null==t?void 0:t.data)||[];return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-nav",children:[(0,n.jsx)(o.h,{}),(0,n.jsxs)("main",{className:"p-4",children:[(0,n.jsx)("h2",{className:"text-lg font-bold mb-4",children:"공지사항"}),r?(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsx)(u.Od,{className:"h-32 w-full"}),(0,n.jsx)(u.Od,{className:"h-32 w-full"})]}):l.length>0?(0,n.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,n.jsxs)(u.Zb,{className:e.isPinned?"border-primary":"",children:[(0,n.jsxs)(u.Ol,{className:"pb-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[e.isPinned&&(0,n.jsx)("span",{className:"text-sm",children:"\uD83D\uDCCC"}),(0,n.jsx)(u.ll,{className:"text-base",children:e.title})]}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString("ko-KR")})]}),(0,n.jsx)(u.aY,{children:(0,n.jsx)("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.content})})]},e.id))}):(0,n.jsxs)("div",{className:"text-center text-muted-foreground py-12",children:[(0,n.jsx)("p",{className:"text-4xl mb-4",children:"\uD83D\uDCE3"}),(0,n.jsx)("p",{children:"공지사항이 없습니다."})]})]}),(0,n.jsx)(i.L,{})]})}},3857:function(e,t,r){"use strict";r.d(t,{L:function(){return u}});var n=r(7573),s=r(8146),a=r(1695),o=r(9147);let i=[{href:"/home",label:"홈",icon:function(e){let{className:t}=e;return(0,n.jsx)("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}},{href:"/posts",label:"제보",icon:function(e){let{className:t}=e;return(0,n.jsx)("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}},{href:"/posts/new",label:"",icon:function(e){let{className:t}=e;return(0,n.jsx)("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})},isCenter:!0},{href:"/points",label:"포인트",icon:function(e){let{className:t}=e;return(0,n.jsx)("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},{href:"/profile",label:"프로필",icon:function(e){let{className:t}=e;return(0,n.jsx)("svg",{className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}}];function u(){let e=(0,a.usePathname)();return(0,n.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 safe-bottom",children:(0,n.jsx)("div",{className:"flex items-center justify-around h-14",children:i.map(t=>{let r=e.startsWith(t.href),a=t.icon;return t.isCenter?(0,n.jsx)(s.default,{href:t.href,className:"flex items-center justify-center w-14 h-14 -mt-5 bg-primary rounded-full shadow-lg",children:(0,n.jsx)(a,{className:"w-6 h-6 text-primary-foreground"})},t.href):(0,n.jsxs)(s.default,{href:t.href,className:(0,o.cn)("flex flex-col items-center justify-center w-16 h-14 text-xs",r?"text-primary":"text-muted-foreground"),children:[(0,n.jsx)(a,{className:"w-5 h-5 mb-1"}),(0,n.jsx)("span",{children:t.label})]},t.href)})})})}},5140:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});var n=r(7573),s=r(8368);function a(){let{currentSiteId:e}=(0,s.a)();return(0,n.jsx)("header",{className:"sticky top-0 z-40 bg-white border-b border-gray-200 safe-top",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-14 px-4",children:[(0,n.jsx)("h1",{className:"text-lg font-bold text-primary",children:"안전지갑"}),e&&(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:["현장 ID: ",e.slice(0,8)]})]})})}},189:function(e,t,r){"use strict";r.d(t,{Un:function(){return c},_g:function(){return f},fj:function(){return l},kx:function(){return i},uV:function(){return u},xt:function(){return d}});var n=r(1988),s=r(7930),a=r(5969),o=r(5118);function i(e){return(0,n.a)({queryKey:["posts",e],queryFn:()=>(0,o.S)("/posts?siteId=".concat(e)),enabled:!!e})}function u(e){return(0,n.a)({queryKey:["post",e],queryFn:()=>(0,o.S)("/posts/".concat(e)),enabled:!!e})}function l(){let e=(0,s.NL)();return(0,a.D)({mutationFn:e=>(0,o.S)("/posts",{method:"POST",body:JSON.stringify(e)}),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["posts",r.siteId]})}})}function c(){return(0,n.a)({queryKey:["profile"],queryFn:()=>(0,o.S)("/users/me")})}function d(e){return(0,n.a)({queryKey:["points",e],queryFn:()=>(0,o.S)("/points?siteId=".concat(e)),enabled:!!e})}function f(e){return(0,n.a)({queryKey:["announcements",e],queryFn:()=>(0,o.S)("/announcements?siteId=".concat(e)),enabled:!!e})}},8368:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var n=r(8144);function s(){let{user:e,isAuthenticated:t,currentSiteId:r,login:s,logout:a,setCurrentSite:o}=(0,n.t)();return{user:e,isAuthenticated:t,currentSiteId:r,login:s,logout:a,setCurrentSite:o}}},5118:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});var n=r(8144);let s=r(4859).env.NEXT_PUBLIC_API_URL||"http://localhost:3333";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{skipAuth:r=!1,headers:a,...u}=t,l={"Content-Type":"application/json",...a};if(!r){let e=n.t.getState().accessToken;e&&(l.Authorization="Bearer ".concat(e))}let c=await fetch("".concat(s).concat(e),{...u,headers:l});if(401===c.status&&!r){if(await o()){let t=n.t.getState().accessToken;l.Authorization="Bearer ".concat(t);let r=await fetch("".concat(s).concat(e),{...u,headers:l});if(!r.ok)throw new i(r.status,await r.text());return r.json()}throw n.t.getState().logout(),new i(401,"Session expired")}if(!c.ok)throw new i(c.status,await c.text());return c.json()}async function o(){let e=n.t.getState().refreshToken;if(!e)return!1;try{let t=await fetch("".concat(s,"/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:e})});if(!t.ok)return!1;let r=await t.json();return n.t.getState().setTokens(r.data.accessToken,r.data.refreshToken),!0}catch(e){return!1}}class i extends Error{constructor(e,t){super(t),this.status=e,this.name="ApiError"}}},9147:function(e,t,r){"use strict";r.d(t,{cn:function(){return n.cn}});var n=r(2384)},8144:function(e,t,r){"use strict";r.d(t,{t:function(){return a}});var n=r(8321),s=r(4452);let a=(0,n.U)()((0,s.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,currentSiteId:null,setUser:t=>e({user:t}),setTokens:(t,r)=>e({accessToken:t,refreshToken:r}),setCurrentSite:t=>e({currentSiteId:t}),login:(t,r,n)=>e({user:t,accessToken:r,refreshToken:n,isAuthenticated:!0}),logout:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,currentSiteId:null})}),{name:"safetywallet-auth",storage:(0,s.FL)(()=>localStorage),partialize:e=>({user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,isAuthenticated:e.isAuthenticated,currentSiteId:e.currentSiteId})}))},2384:function(e,t,r){"use strict";r.d(t,{qE:function(){return y},Q5:function(){return j},Ct:function(){return b},zx:function(){return c},Zb:function(){return d},aY:function(){return x},SZ:function(){return m},Ol:function(){return f},ll:function(){return h},II:function(){return p},Od:function(){return v},cn:function(){return a}});var n=r(607),s=r(5579);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,n.W)(t))}var o=r(7573),i=r(7653),u=r(9289);let l=(0,u.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:r,variant:n,size:s,...i}=e;return(0,o.jsx)("button",{className:a(l({variant:n,size:s,className:r})),ref:t,...i})});c.displayName="Button";let d=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:a("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});d.displayName="Card";let f=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:a("flex flex-col space-y-1.5 p-6",r),...n})});f.displayName="CardHeader";let h=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("h3",{ref:t,className:a("text-2xl font-semibold leading-none tracking-tight",r),...n})});h.displayName="CardTitle";let m=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("p",{ref:t,className:a("text-sm text-muted-foreground",r),...n})});m.displayName="CardDescription";let x=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:a("p-6 pt-0",r),...n})});x.displayName="CardContent",i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("div",{ref:t,className:a("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter";let p=i.forwardRef((e,t)=>{let{className:r,type:n,...s}=e;return(0,o.jsx)("input",{type:n,className:a("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});p.displayName="Input";let g=(0,u.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground",outline:"text-foreground",success:"border-transparent bg-success text-success-foreground",warning:"border-transparent bg-warning text-warning-foreground",info:"border-transparent bg-blue-500 text-white",neutral:"border-transparent bg-gray-500 text-white"}},defaultVariants:{variant:"default"}});function b(e){let{className:t,variant:r,...n}=e;return(0,o.jsx)("div",{className:a(g({variant:r}),t),...n})}function v(e){let{className:t,...r}=e;return(0,o.jsx)("div",{className:a("animate-pulse rounded-md bg-muted",t),...r})}let y=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("span",{ref:t,className:a("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...n})});y.displayName="Avatar",i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("img",{ref:t,className:a("aspect-square h-full w-full",r),...n})}).displayName="AvatarImage";let j=i.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,o.jsx)("span",{ref:t,className:a("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...n})});j.displayName="AvatarFallback"}},function(e){e.O(0,[707,953,485,146,293,456,744],function(){return e(e.s=527)}),_N_E=e.O()}]);