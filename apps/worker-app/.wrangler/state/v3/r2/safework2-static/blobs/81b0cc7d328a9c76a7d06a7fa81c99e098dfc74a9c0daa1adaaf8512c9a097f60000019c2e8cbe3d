(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6356:function(e,t,n){Promise.resolve().then(n.bind(n,1403))},1403:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=n(7573),u=n(7653),a=n(1695),i=n(8368);function s(){let e=(0,a.useRouter)(),{isAuthenticated:t,currentSiteId:n}=(0,i.a)();return(0,u.useEffect)(()=>{t?n?e.replace("/home"):e.replace("/join"):e.replace("/login")},[t,n,e]),(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-pulse text-muted-foreground",children:"로딩 중..."})})}},8368:function(e,t,n){"use strict";n.d(t,{a:function(){return u}});var r=n(8144);function u(){let{user:e,isAuthenticated:t,currentSiteId:n,login:u,logout:a,setCurrentSite:i}=(0,r.t)();return{user:e,isAuthenticated:t,currentSiteId:n,login:u,logout:a,setCurrentSite:i}}},8144:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var r=n(8321),u=n(4452);let a=(0,r.U)()((0,u.tJ)(e=>({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,currentSiteId:null,setUser:t=>e({user:t}),setTokens:(t,n)=>e({accessToken:t,refreshToken:n}),setCurrentSite:t=>e({currentSiteId:t}),login:(t,n,r)=>e({user:t,accessToken:n,refreshToken:r,isAuthenticated:!0}),logout:()=>e({user:null,accessToken:null,refreshToken:null,isAuthenticated:!1,currentSiteId:null})}),{name:"safetywallet-auth",storage:(0,u.FL)(()=>localStorage),partialize:e=>({user:e.user,accessToken:e.accessToken,refreshToken:e.refreshToken,isAuthenticated:e.isAuthenticated,currentSiteId:e.currentSiteId})}))},1695:function(e,t,n){"use strict";var r=n(1219);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})},4452:function(e,t,n){"use strict";function r(e,t){let n;try{n=e()}catch(e){return}return{getItem:e=>{var r;let u=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),a=null!=(r=n.getItem(e))?r:null;return a instanceof Promise?a.then(u):u(a)},setItem:(e,r)=>n.setItem(e,JSON.stringify(r,null==t?void 0:t.replacer)),removeItem:e=>n.removeItem(e)}}n.d(t,{FL:function(){return r},tJ:function(){return a}});let u=e=>t=>{try{let n=e(t);if(n instanceof Promise)return n;return{then:e=>u(e)(n),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>u(t)(e)}}},a=(e,t)=>(n,a,i)=>{let s,l={storage:r(()=>window.localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},o=!1,c=0,d=new Set,f=new Set,h=l.storage;if(!h)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),n(...e)},a,i);let m=()=>{let e=l.partialize({...a()});return h.setItem(l.name,{state:e,version:l.version})},g=i.setState;i.setState=(e,t)=>(g(e,t),m());let v=e((...e)=>(n(...e),m()),a,i);i.getInitialState=()=>v;let S=()=>{var e,t;if(!h)return;let r=++c;o=!1,d.forEach(e=>{var t;return e(null!=(t=a())?t:v)});let i=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(e=a())?e:v))||void 0;return u(h.getItem.bind(h))(l.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;if(r!==c)return;let[u,i]=e;if(n(s=l.merge(i,null!=(t=a())?t:v),!0),u)return m()}).then(()=>{r===c&&(null==i||i(s,void 0),s=a(),o=!0,f.forEach(e=>e(s)))}).catch(e=>{r===c&&(null==i||i(void 0,e))})};return i.persist={setOptions:e=>{l={...l,...e},e.storage&&(h=e.storage)},clearStorage:()=>{null==h||h.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>S(),hasHydrated:()=>o,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(f.add(e),()=>{f.delete(e)})},l.skipHydration||S(),s||v}},8321:function(e,t,n){"use strict";n.d(t,{U:function(){return l}});var r=n(7653);let u=e=>{let t;let n=new Set,r=(e,r)=>{let u="function"==typeof e?e(t):e;if(!Object.is(u,t)){let e=t;t=(null!=r?r:"object"!=typeof u||null===u)?u:Object.assign({},t,u),n.forEach(n=>n(t,e))}},u=()=>t,a={setState:r,getState:u,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e))},i=t=e(r,u,a);return a},a=e=>e?u(e):u,i=e=>e,s=e=>{let t=a(e),n=e=>(function(e,t=i){let n=r.useSyncExternalStore(e.subscribe,r.useCallback(()=>t(e.getState()),[e,t]),r.useCallback(()=>t(e.getInitialState()),[e,t]));return r.useDebugValue(n),n})(t,e);return Object.assign(n,t),n},l=e=>e?s(e):s}},function(e){e.O(0,[293,528,744],function(){return e(e.s=6356)}),_N_E=e.O()}]);